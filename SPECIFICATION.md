# 理科問題ジェネレーター 仕様書

**Version:** 1.0  
**作成日:** 2026年1月31日  
**最終更新:** 2026年1月31日

---

## 📋 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [目的・背景](#目的背景)
3. [ターゲットユーザー](#ターゲットユーザー)
4. [システム方針](#システム方針)
5. [機能要件](#機能要件)
6. [技術スタック](#技術スタック)
7. [開発ロードマップ](#開発ロードマップ)
8. [システム構成](#システム構成)
9. [データ設計](#データ設計)
10. [非機能要件](#非機能要件)
11. [今後の課題・検討事項](#今後の課題検討事項)

---

## プロジェクト概要

### プロジェクト名
**理科問題ジェネレーター（仮称）**

### 概要
中学受験向けの理科問題を、変数を調整することで無限に生成できるWebアプリケーション。
教師や塾講師、保護者が類題作成の手間を削減し、効率的に学習教材を準備できることを目指す。

### 主な特徴
- **テンプレート方式**：事前に設計した問題パターンから確実な品質で問題生成
- **変数調整型**：数値パラメータを変更するだけで新しい問題を作成
- **即座に解答表示**：自動計算された解答と詳細な解説を提供
- **図の自動生成**：問題に応じた図をリアルタイムで描画
- **サーバー不要**：完全なフロントエンドアプリとして動作

---

## 目的・背景

### 解決したい課題
1. **類題作成の負担**
   - 教師・講師が手作業で類題を作成する時間的コスト
   - 同じ問題を繰り返すと生徒が答えを暗記してしまう問題

2. **品質のバラつき**
   - 手作業で作成すると計算ミスや不整合が発生しやすい
   - 解答の正確性を毎回確認する手間

3. **教材準備の効率化**
   - 個々の生徒のレベルに合わせた問題を素早く用意したい
   - テスト・宿題・補習用の問題を大量に必要とする

### プロジェクトの目指すもの
- **時間削減**：問題作成時間を90%以上削減
- **品質保証**：計算ミスのない確実な問題と解答
- **柔軟性**：生徒のレベルや学習段階に応じた調整が可能
- **スケーラビリティ**：将来的に問題パターンを拡張可能

---

## ターゲットユーザー

### メインターゲット
1. **塾講師・家庭教師**
   - 中学受験指導を行う講師
   - 個別指導・少人数指導の教師
   
2. **学校教員**
   - 私立小学校の教員
   - 中学受験対策を行う教員

3. **保護者**
   - 子どもの中学受験をサポートする親
   - 家庭学習の教材を準備したい親

### ユーザー特性
- **ITリテラシー**：一般的なWebサイトを利用できるレベル
- **理科知識**：中学受験レベルの理科を理解している
- **ニーズ**：短時間で質の高い問題を大量に作成したい

### ユーザー数想定
- **フェーズ1**（初期）：数十人〜数百人
- **フェーズ2**（成長期）：数千人
- **フェーズ3**（成熟期）：不特定多数（一般公開）

---

## システム方針

### 基本方針

#### 1. テンプレート方式を主軸とする
- **理由**：品質保証・ユーザーの信頼獲得が最優先
- **方針**：事前に検証済みの問題パターンを提供
- **メリット**：
  - 計算ミスがない
  - 教師の確認作業が不要
  - 安定した運用

#### 2. AI方式は補助的位置づけ
- **現状**：実装予定なし（将来的なオプション）
- **用途**：問題パターンのアイデア出し、開発支援
- **制約**：公開前に必ず人間が検証

#### 3. サーバーレス・シンプル構成
- **方針**：完全なフロントエンドアプリ（HTML/CSS/JavaScript）
- **理由**：
  - 開発コストの削減
  - サーバー運用費用ゼロ
  - 既存サイトへの組み込みが容易

#### 4. データ保存は行わない
- **方針**：問題の保存・履歴管理はユーザー側で実施
- **理由**：
  - システムの複雑化を避ける
  - ユーザー管理が不要
  - GDPR等のデータ保護規制に対応不要

---

## 機能要件

### 現在実装済み（v1.0）

#### 問題生成機能
- [x] 単一のばね問題
  - 自然長、伸び率、おもりの重さを変数化
  - 3つの小問を自動生成
  
- [x] 直列つなぎ問題
  - 2種類のばねの特性を変数化
  - おもりの重さを変数化
  - 3つの小問を自動生成

- [x] 並列つなぎ問題
  - ばねの本数を2〜5本で可変
  - おもりの重さを変数化
  - 3つの小問を自動生成

#### UI機能
- [x] タブ切り替えで問題タイプ選択
- [x] 数値入力フォーム
- [x] リアルタイム図描画（Canvas使用）
- [x] 解答表示/非表示ボタン
- [x] 詳細な解説と計算式の表示

#### 非機能
- [x] レスポンシブデザイン（PC/タブレット/スマホ対応）
- [x] ブラウザのみで完結（インストール不要）
- [x] オフライン動作可能

---

### 今後実装予定

#### フェーズ1：プロトタイプ整形（1〜2週間）
- [ ] UIデザインの洗練
- [ ] 入力バリデーション強化
- [ ] エラーハンドリング
- [ ] 操作説明・ヘルプ機能
- [ ] 問題番号の自動採番

#### フェーズ2：ホーム画面作成（1週間）
- [ ] 問題一覧画面
- [ ] カテゴリ分類（単元別・難易度別）
- [ ] 検索・フィルタ機能
- [ ] お気に入り機能（ブラウザ保存）

#### フェーズ3：問題パターン拡充（継続的）
物理分野の主要単元を順次追加：
- [ ] てこ（支点・力点・作用点）
- [ ] 浮力（物体の浮き沈み）
- [ ] てんびん（つり合い）
- [ ] 滑車（定滑車・動滑車）
- [ ] 輪軸
- [ ] 斜面（摩擦・仕事）
- [ ] ふりこ
- [ ] おもりの運動
- [ ] 圧力
- [ ] 音・光
- [ ] 電気回路
- [ ] 磁石

#### フェーズ4：問題追加システム構築（検討中）
- [ ] 問題テンプレートのJSON化
- [ ] 管理画面（問題追加・編集）
- [ ] 問題追加マニュアル作成

---

### 将来的に検討（優先度：中）

#### A. 問題作成系機能
- [ ] **PDF出力機能**
  - ブラウザ印刷の最適化
  - または専用PDF生成機能
  
- [ ] **テスト形式作成**
  - 複数問題をまとめて1つのテストに
  - 問題の組み合わせ選択
  - 配点設定
  
- [ ] **印刷レイアウト最適化**
  - A4サイズに最適化
  - 解答別ページ化
  - 解答欄の追加

- [ ] **問題のブックマーク**
  - LocalStorageで保存
  - お気に入り問題の管理

---

### 実装しない機能（明確に除外）

#### B. ユーザー管理系
- ログイン機能
- ユーザーアカウント
- データのクラウド保存
- 複数ユーザーでのデータ共有

#### C. 高度な機能
- 生徒向け機能（解答提出・採点）
- 統計・分析機能
- SNS連携

#### D. AI機能（公開版）
- 一般ユーザー向けのAI問題生成
  - 理由：品質管理が困難
  - 代替：開発者がAIで問題案を作り、検証後にテンプレート化

---

## 技術スタック

### フロントエンド
| 技術 | 用途 | 理由 |
|------|------|------|
| HTML5 | 構造 | 標準・シンプル |
| CSS3 | スタイリング | カスタムデザイン |
| JavaScript (Vanilla) | ロジック | ライブラリ不要・軽量 |
| Canvas API | 図の描画 | ブラウザ標準・高速 |

### ホスティング
| サービス | 用途 | 理由 |
|----------|------|------|
| GitHub Pages | 本番環境 | 無料・安定・簡単 |
| GitHub | バージョン管理 | 業界標準 |

### 開発ツール
- テキストエディタ（VS Code等）
- ブラウザ開発者ツール
- Claude（AI開発支援）

### 将来的な技術検討
- **PDF生成**: jsPDF, html2canvas
- **状態管理**: 必要に応じてReact等を検討
- **テスト**: Jest等の導入検討

---

## 開発ロードマップ

### 2026年2月（フェーズ1：プロトタイプ整形）
- UIの改善とユーザビリティ向上
- バグ修正とエラーハンドリング
- 入力値の妥当性チェック強化
- ヘルプ・説明機能の追加

### 2026年3月（フェーズ2：ホーム画面）
- 問題一覧ページの作成
- ナビゲーション構造の整備
- カテゴリ・タグ機能

### 2026年4月〜6月（フェーズ3：問題拡充）
- てこ問題の追加
- 浮力問題の追加
- てんびん問題の追加
- 滑車問題の追加
- （月2〜3パターン追加目標）

### 2026年7月〜（フェーズ4：システム化）
- 問題追加プロセスの標準化
- テンプレートフォーマットの確立
- 管理機能の検討

### 長期（フェーズ5：事業展開）
- アプリ売却の準備
- ドキュメント整備
- 引き継ぎ資料作成

---

## システム構成

### アーキテクチャ

```
┌─────────────────────────────────────┐
│         ユーザー（ブラウザ）          │
└─────────────┬───────────────────────┘
              │
              │ HTTPS
              │
┌─────────────▼───────────────────────┐
│       GitHub Pages (静的ホスト)       │
│                                      │
│  ┌────────────────────────────────┐  │
│  │         index.html             │  │
│  │  (HTML + CSS + JavaScript)     │  │
│  └────────────────────────────────┘  │
│                                      │
│  ├─ 問題生成ロジック                  │
│  ├─ 図描画エンジン (Canvas)           │
│  ├─ UI制御                          │
│  └─ 計算エンジン                     │
└──────────────────────────────────────┘

※サーバーサイド処理なし
※データベースなし
※API通信なし（将来的にAI機能追加時のみ）
```

### ファイル構成（現在）

```
spring-problem-generator/
├── index.html          # メインアプリケーション（単一ファイル）
└── README.md           # プロジェクト説明
```

### ファイル構成（将来予定）

```
science-problem-generator/
├── index.html                    # ホーム画面
├── css/
│   └── style.css                # 共通スタイル
├── js/
│   ├── common.js                # 共通関数
│   ├── canvas-utils.js          # 図描画ユーティリティ
│   └── calculation.js           # 計算エンジン
├── problems/
│   ├── spring/
│   │   ├── single.html          # 単一ばね
│   │   ├── series.html          # 直列
│   │   └── parallel.html        # 並列
│   ├── lever/
│   │   └── basic.html           # てこ
│   └── buoyancy/
│       └── basic.html           # 浮力
├── assets/
│   └── images/                  # 必要に応じて画像素材
└── README.md
```

---

## データ設計

### 問題テンプレート構造

現状はJavaScript内にハードコード。将来的にJSON化を検討。

```javascript
// 問題テンプレートの概念モデル
{
  id: "spring_single_001",
  category: "物理",
  unit: "ばね",
  type: "単一のばね",
  difficulty: 1,  // 1-5
  
  // 変数定義
  variables: {
    naturalLength: { min: 5, max: 50, default: 15, unit: "cm" },
    baseWeight: { min: 1, max: 100, default: 20, unit: "g" },
    baseStretch: { min: 1, max: 20, default: 2, unit: "cm" },
    weight: { min: 1, max: 200, default: 60, unit: "g" }
  },
  
  // 問題文生成関数
  generateProblem: function(vars) { ... },
  
  // 解答計算関数
  calculateAnswer: function(vars) { ... },
  
  // 図描画関数
  drawDiagram: function(canvas, vars) { ... }
}
```

### LocalStorage設計（将来）

```javascript
// お気に入り問題
{
  "favorites": [
    {
      "problemId": "spring_single_001",
      "variables": { naturalLength: 15, baseWeight: 20, ... },
      "timestamp": "2026-02-01T10:30:00Z"
    }
  ]
}

// 最近使った問題
{
  "recentProblems": [
    {
      "problemId": "spring_series_001",
      "variables": { ... },
      "timestamp": "2026-02-01T14:20:00Z"
    }
  ]
}
```

---

## 非機能要件

### パフォーマンス
- 問題生成：1秒以内
- 図の描画：0.5秒以内
- ページ読み込み：3秒以内（初回）

### 互換性
- **ブラウザ対応**：
  - Chrome 90+
  - Firefox 88+
  - Safari 14+
  - Edge 90+
- **デバイス対応**：
  - PC（Windows/Mac/Linux）
  - タブレット（iPad等）
  - スマートフォン

### セキュリティ
- HTTPS通信（GitHub Pages標準）
- XSS対策（入力値のサニタイズ）
- ユーザーデータの非保存（プライバシー保護）

### 可用性
- GitHub Pagesの稼働率に依存（99.9%以上）
- サーバーメンテナンス不要

### スケーラビリティ
- 同時アクセス数：無制限（静的サイトのため）
- トラフィック制限：GitHub Pagesの制限に準拠
  - 月間100GB程度まで（通常は問題なし）

### 保守性
- コードの可読性重視
- コメント・ドキュメント充実
- バージョン管理（Git）
- 問題追加の手順書整備

---

## 今後の課題・検討事項

### 技術的課題

#### 1. PDF出力機能
**課題**：ブラウザ印刷では図が崩れる可能性
**検討案**：
- jsPDF + html2canvas でPDF生成
- 専用の印刷レイアウトCSS
- SVGによる図の描画（Canvas → SVG移行）

#### 2. 問題の体系化
**課題**：問題数が増えるとファイル管理が煩雑
**検討案**：
- JSONベースのテンプレート管理
- 問題メタデータの標準化
- 自動テスト（計算結果の妥当性チェック）

#### 3. 図の描画品質
**課題**：Canvasでは複雑な図の描画が困難
**検討案**：
- SVGライブラリの導入（D3.js等）
- 事前作成した画像素材の利用
- 数式表示（MathJax等）

---

### ビジネス的課題

#### 1. マネタイズ戦略
**現状**：収益化は未定
**検討案**：
- アプリ全体の売却（ソースコード + ドメイン）
- 広告掲載（Google AdSense等）
- 有料版の提供（PDF出力等）
- 教材販売プラットフォームへの提供

#### 2. 競合分析
**類似サービスの調査**：
- 既存の問題生成ツール
- 教材販売サイト
- 学習アプリ

#### 3. ユーザー獲得
**検討事項**：
- SEO対策
- 教育関連SNSでの宣伝
- 教員コミュニティへのアプローチ
- 無料お試し期間

---

### 品質管理課題

#### 1. 問題の妥当性チェック
**課題**：変数の組み合わせによって不自然な問題が生成される可能性
**対策**：
- 変数の範囲制限
- 計算結果の妥当性チェック（割り切れない値の除外等）
- テストケースの整備

#### 2. 解答の正確性保証
**対策**：
- 単体テストの実装
- 複数パターンでの検証
- 教員によるレビュー

#### 3. ユーザビリティテスト
**実施内容**：
- 実際の教師にテスト利用してもらう
- フィードバック収集
- UI/UXの改善

---

### 拡張性の課題

#### 1. 他分野への展開
**物理以外**：
- 化学（水溶液、燃焼、気体など）
- 生物（植物、人体、生態系など）
- 地学（天体、地層、気象など）

**課題**：各分野で必要な図や計算式が異なる
**対策**：汎用的なフレームワーク設計

#### 2. 問題の多様化
**現状**：計算問題中心
**展開案**：
- 記述式問題
- 選択式問題
- 実験手順の問題

---

## 付録

### 参考資料
- 中学受験理科の出題傾向調査
- フックの法則（ばね）の基礎理論
- Canvas API リファレンス
- GitHub Pages ドキュメント

### 用語集
- **テンプレート方式**：事前に設計した問題パターンから生成
- **変数化**：問題の数値部分をパラメータとして可変にすること
- **フックの法則**：ばねの伸びが力に比例する法則
- **直列つなぎ**：ばねを縦に接続する方法
- **並列つなぎ**：ばねを横に接続する方法

---

## バージョン履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| 1.0 | 2026-01-31 | 初版作成 |

---

## 連絡先・管理

- **プロジェクト管理者**: [名前]
- **リポジトリ**: https://github.com/enzun/problem-generator
- **公開URL**: https://enzun.github.io/problem-generator/

---

**この仕様書は開発の進捗に応じて随時更新されます。**
